<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Backup files and folders to Google Drive without giving access to all of your drive.">
<title>An R package to backup folders to Google Drive with limited permissions  • rbackupr</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="An R package to backup folders to Google Drive with limited permissions ">
<meta property="og:description" content="Backup files and folders to Google Drive without giving access to all of your drive.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">rbackupr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9001</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/getting_started.html">Getting_started</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="rbackupr">rbackupr<a class="anchor" aria-label="anchor" href="#rbackupr"></a>
</h1></div>
<!-- badges: start -->

<p>The goal of rbackupr is to facilitate online backups to Google Drive from R. Key features:</p>
<ul>
<li>it uses requires limited permission (only to files created by this app, not all of your Google Drive)</li>
<li>it caches metadata locally for speedy updates</li>
<li>it allows for easy management of multiple backups based on the idea of “projects” located under a top level folder</li>
<li>the top level folder on the local disk can be moved, or read from somewhere else: all paths are relative to the base folder</li>
<li>it allows for backups recursively (e.g. deeply nested folders), and makes it easy to include only some of the contents (e.g. all “.csv” files from all the subfolders that have a bunch of other files)</li>
</ul>
<p><strong>Warning: I have not finalised testing and documentation, but it seems to work as expected at this stage. Given that, by default, it requests access only to files created by itself, it should be mostly safe to use. Of course, make sure it is fit for (your) purpose. Consider creating your own Google App (see below).</strong></p>
<div class="section level2">
<h2 id="core-motivation">Core motivation<a class="anchor" aria-label="anchor" href="#core-motivation"></a>
</h2>
<p>By default, when you use the <code>googledrive</code> package you give access to all of your Google Drive. This has a number of shortcomings, in particular if you use Google Drive for different reasons and you have many files and folders stored there:</p>
<ul>
<li>going thrhough a lot of files, <code>googledrive</code> is slow in finding what you need</li>
<li>in particular if you use <code>googledrive</code> from a remote server, you may feel unconfortable in potentially leaving an open door to <em>all</em> of the files you have stored there</li>
<li>even if you use it locally, you may be concerned of the mistakes you could make by giving full access to all of your files to scripts written by you, or to packages published by a random GitHub user (such as the author of this package)</li>
</ul>
<p>While you can give full access to Google Drive if you so wish, <code>rbackupr</code> is developed based on the expectation that it will have only access to the <a href="https://developers.google.com/drive/api/v2/about-auth" class="external-link">“drive.file” scope of Google Drive</a>, i.e. that it have “access to files created or opened by the app”. In brief, of course you still need to trust the scripts you are running, but at least you can be sure that it will not mess with completely unrelated files you keep on Google Drive.</p>
<p>See screenshot of Google authentication prompt, where it is clear that you give <code>rbackupr</code> access only to “the specific Google Drive files that you use with this app.”</p>
<p><img src="reference/figures/google_login_screen.png" align="center"></p>
<p>In order to reduce the impact of some of the issues that come with this choice, this app caches locally metadata about remote folders and files in order to speed up processing.</p>
<p>An additional benefit of <code>rbackupr</code> is that it is agnostic about the location of the base folder, as it stores only relative path: it is possible to keep a folder up to date from different locations, or move a folder and have it updated without issues.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of <code>rbackupr</code> from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("remotes")</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"giocomai/rbackupr"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="how-to-use">How to use<a class="anchor" aria-label="anchor" href="#how-to-use"></a>
</h2>
<p>In order to show how this package works, we will first create some files with random data in the temporary folder. So this is how our base folder looks like: a main folder, with some sub-folders, and some files within each of them.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://giocomai.github.io/rbackupr/">"rbackupr"</a></span><span class="op">)</span></span>
<span><span class="va">base_temp_folder</span> <span class="op">&lt;-</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/create.html" class="external-link">dir_create</a></span><span class="op">(</span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path.html" class="external-link">path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>                                            <span class="st">"rbackupr_testing"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">subfolder_names</span> <span class="op">&lt;-</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html" class="external-link">str_c</a></span><span class="op">(</span><span class="st">"data_"</span>,</span>
<span>                                  <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">10</span><span class="op">:</span><span class="fl">100</span>, size <span class="op">=</span> <span class="fl">3</span>, replace <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">walk</a></span><span class="op">(</span></span>
<span>  .x <span class="op">=</span> <span class="va">subfolder_names</span>,</span>
<span>  .f <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">current_folder</span> <span class="op">&lt;-</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path.html" class="external-link">path</a></span><span class="op">(</span><span class="va">base_temp_folder</span>, <span class="va">x</span><span class="op">)</span></span>
<span>    <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/create.html" class="external-link">dir_create</a></span><span class="op">(</span>path <span class="op">=</span> <span class="va">current_folder</span><span class="op">)</span></span>
<span>    <span class="va">current_number</span> <span class="op">&lt;-</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_extract.html" class="external-link">str_extract</a></span><span class="op">(</span>string <span class="op">=</span> <span class="va">x</span>, pattern <span class="op">=</span> <span class="st">"[[:digit:]]+"</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> </span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">walk</a></span><span class="op">(</span></span>
<span>      .x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">2</span><span class="op">:</span><span class="fl">5</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      .f <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span></span>
<span>        <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/write_delim.html" class="external-link">write_csv</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>numbers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">10</span>, mean <span class="op">=</span> <span class="va">current_number</span><span class="op">)</span><span class="op">)</span>, </span>
<span>                         file <span class="op">=</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/file_temp.html" class="external-link">file_temp</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html" class="external-link">str_c</a></span><span class="op">(</span><span class="st">"spreadsheet_"</span>, <span class="va">current_number</span>, <span class="st">"_"</span><span class="op">)</span>,</span>
<span>                                              tmp_dir <span class="op">=</span> <span class="va">current_folder</span>,</span>
<span>                                              ext <span class="op">=</span> <span class="st">"csv"</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="op">}</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/dir_tree.html" class="external-link">dir_tree</a></span><span class="op">(</span><span class="va">base_temp_folder</span><span class="op">)</span></span>
<span><span class="co">#&gt; /tmp/RtmpIEtxRk/rbackupr_testing</span></span>
<span><span class="co">#&gt; ├── data_34</span></span>
<span><span class="co">#&gt; │   ├── spreadsheet_34_5c3240af716c.csv</span></span>
<span><span class="co">#&gt; │   └── spreadsheet_34_5c327bd86062.csv</span></span>
<span><span class="co">#&gt; ├── data_58</span></span>
<span><span class="co">#&gt; │   ├── spreadsheet_58_5c321440281a.csv</span></span>
<span><span class="co">#&gt; │   ├── spreadsheet_58_5c322a1153ef.csv</span></span>
<span><span class="co">#&gt; │   └── spreadsheet_58_5c3255ec915a.csv</span></span>
<span><span class="co">#&gt; └── data_74</span></span>
<span><span class="co">#&gt;     ├── spreadsheet_74_5c323393fef0.csv</span></span>
<span><span class="co">#&gt;     ├── spreadsheet_74_5c323a007f8f.csv</span></span>
<span><span class="co">#&gt;     └── spreadsheet_74_5c324c0587d5.csv</span></span></code></pre></div>
<p>By default, <code>rbackupr</code> does not cache metadata files and folders it stores on Google Drive, but you are strongly encouraged to do so. You can do so with <code><a href="reference/rb_enable_cache.html">rb_enable_cache()</a></code>. By default, metadata will be cached in the current active directory, but if you use <code>rbackupr</code> with different projects, you may not want to leave files with cached metadata scattered around your local drive, but rather keep them in place where they can be accessed. Something like this could typically be included at the beginning of <code>rbackupr</code> backup scripts.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://giocomai.github.io/rbackupr/">"rbackupr"</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/rb_enable_cache.html">rb_enable_cache</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/rb_set_cache_folder.html">rb_set_cache_folder</a></span><span class="op">(</span>path <span class="op">=</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path.html" class="external-link">path</a></span><span class="op">(</span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path_expand.html" class="external-link">path_home_r</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>                                    <span class="st">"R"</span>,</span>
<span>                                    <span class="st">"rb_data"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/rb_create_cache_folder.html">rb_create_cache_folder</a></span><span class="op">(</span>ask <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>To reduce mixing of files you uploaded with <code>rbackupr</code> with other files you likely have on Google Drive, all your files and folders are stored under a base folder, that by default is called “rbackupr”. You can call your base folder something else, you can have more than one base folder, but you’re probably fine just by keeping the defaults. Under your base folder, you will have a “project” folder, and under that folder, you will actually have all your files related to that project.</p>
<p>No matter full path on your files on your hard drive, the folder you set up to backup will correspond to the project folder.</p>
<p>So the first step you need to take, is set a project for the current session, and then actually create its own folder on Google Drive, if it doesn’t yet exist.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/rb_set_project.html">rb_set_project</a></span><span class="op">(</span>project <span class="op">=</span> <span class="st">"rbackupr_testing"</span><span class="op">)</span> <span class="co"># this will set the project for the current session</span></span>
<span><span class="fu"><a href="reference/rb_drive_auth.html">rb_drive_auth</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/rb_drive_find_project.html">rb_get_project</a></span><span class="op">(</span>create <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># if it already exists, it just returns its dribble</span></span></code></pre></div>
<p>At this stage, among all your files and folder on Google Drive, you should expect to find a folder called <code>rbackupr</code> by default (you can customise this in <code><a href="reference/rb_drive_find_project.html">rb_drive_create_project()</a></code>). Within that folder, you will find another folder, <code>rbackupr_testing</code> (the one we set as project). All the files you backup from now on in the current session will be located under this folder.</p>
<p>Notice that since we are giving only the <code>drive.file</code> scope, i.e. only access to files and folders created with the current app, if you run <code><a href="https://googledrive.tidyverse.org/reference/drive_ls.html" class="external-link">googledrive::drive_ls()</a></code> you should only see those two folders and nothing else.</p>
<p>The following steps are based on the basic idea of caching locally key information about online resources stored by Google Drive This is helpful in particular considering the fact that if you have many files, retrieving just a full file list from Google Drive to check what needs to be uploaded can be extremely time-consuming. In the local cache, for simplicity, not all data that are part of a dribble are stored.</p>
<p>For the base folder, under which all projects are expected to be located, only name and dribble id are stored. Indeed, they have no “parent folder”.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/rb_drive_find_base_folder.html">rb_drive_find_base_folder</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 2</span></span>
<span><span class="co">#&gt;   name     id                               </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;    &lt;drv_id&gt;                         </span></span>
<span><span class="co">#&gt; 1 rbackupr 1DFtFrmrV1_szp3NrbuWkq45FzozFwzOy</span></span></code></pre></div>
<p>Even if all projects are expected to be located under a single base folder, local cache for them stores also the id of the base folder as <code>parent_id</code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/rb_drive_find_project.html">rb_get_project</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 3</span></span>
<span><span class="co">#&gt;   name             id                                parent_id                  </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;            &lt;drv_id&gt;                          &lt;chr&gt;                      </span></span>
<span><span class="co">#&gt; 1 rbackupr_testing 1inLe1aYhbKbIOUPnjPih9J-Z3q8mH-bw 1DFtFrmrV1_szp3NrbuWkq45Fz…</span></span></code></pre></div>
<p>Under the project folder, the real folders and files that are part of the backup are stored.</p>
<p>We can see the folders included in the base project with:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/rb_drive_find_project.html">rb_get_project</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="reference/rb_get_folders.html">rb_get_folders</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 11 × 4</span></span>
<span><span class="co">#&gt;    name           id                                parent_id      relative_path</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;          &lt;drv_id&gt;                          &lt;drv_id&gt;       &lt;fs::path&gt;   </span></span>
<span><span class="co">#&gt;  1 data_34        1-KA38B0xhXstirvcWjQ21QMg3sjer38h 1inLe1aYhbKbI… data_34      </span></span>
<span><span class="co">#&gt;  2 data_58        1WwA25vkN_tyT1v3i-q5YTVEDNicRy5n5 1inLe1aYhbKbI… data_58      </span></span>
<span><span class="co">#&gt;  3 data_74        1gqeIudhtbR3qgP5uwDrHslRITg3AeHps 1inLe1aYhbKbI… data_74      </span></span>
<span><span class="co">#&gt;  4 data_detail_43 1K7ehxCNDr06nAL-EaRw31aOFgdFLyPwK 1-KA38B0xhXst… …ta_detail_43</span></span>
<span><span class="co">#&gt;  5 data_detail_46 1KgQk30czp4iaGTD0Lo_sAixkHsjDnwjA 1-KA38B0xhXst… …ta_detail_46</span></span>
<span><span class="co">#&gt;  6 data_detail_52 1HyAfKdBBYBZCmJfkI_WXFw3UlpOdI9tr 1WwA25vkN_tyT… …ta_detail_52</span></span>
<span><span class="co">#&gt;  7 data_detail_89 1DF-OYIGd6IBNYq7y93hBVUdaqS1PGeQF 1WwA25vkN_tyT… …ta_detail_89</span></span>
<span><span class="co">#&gt;  8 data_detail_40 1QALXJAE5n1UTvtzhPLxwQ9ndqaSu7o_n 1gqeIudhtbR3q… …ta_detail_40</span></span>
<span><span class="co">#&gt;  9 data_detail_71 1SDIjSc0nwAoBJjc3HPftBYNvnA78KnMd 1gqeIudhtbR3q… …ta_detail_71</span></span>
<span><span class="co">#&gt; 10 deeper         1DE6FD_5-oMvml4LoR6ps3PZUOK5HM3bo 1DF-OYIGd6IBN… …il_89/deeper</span></span>
<span><span class="co">#&gt; 11 much deeper    1YI1HQgufmFGafw7mHiTFHhyrrZFYNv7e 1DE6FD_5-oMvm… …/much deeper</span></span></code></pre></div>
<p>Then, for files, more details are stored in cache, including:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/rb_drive_find_project.html">rb_get_project</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="reference/rb_get_folders.html">rb_get_folders</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="reference/rb_get_files.html">rb_get_files</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 4 × 11</span></span>
<span><span class="co">#&gt;   name                  id    mimeType createdTime modifiedTime originalFilename</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                 &lt;drv&gt; &lt;chr&gt;    &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt;           </span></span>
<span><span class="co">#&gt; 1 spreadsheet_34_b0861… 1eBN… text/csv 2022-02-27… 2022-02-27T… spreadsheet_34_…</span></span>
<span><span class="co">#&gt; 2 spreadsheet_34_b0867… 1Oh_… text/csv 2022-02-27… 2022-02-27T… spreadsheet_34_…</span></span>
<span><span class="co">#&gt; 3 spreadsheet_34_4fef6… 1C9E… text/csv 2022-03-01… 2022-03-01T… spreadsheet_34_…</span></span>
<span><span class="co">#&gt; 4 spreadsheet_34_4fef7… 1Be3… text/csv 2022-03-01… 2022-03-01T… spreadsheet_34_…</span></span>
<span><span class="co">#&gt; # … with 5 more variables: fullFileExtension &lt;chr&gt;, size &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   md5Checksum &lt;chr&gt;, parent_id &lt;drv_id&gt;, rbackupr_cache_time &lt;dbl&gt;</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="creating-your-own-app">Creating your own app<a class="anchor" aria-label="anchor" href="#creating-your-own-app"></a>
</h2>
<p>For more details on creating your own app see in particular:</p>
<ul>
<li><a href="https://gargle.r-lib.org/articles/get-api-credentials.html" class="external-link">How to get your own API credentials</a></li>
<li><a href="https://googledrive.tidyverse.org/articles/bring-your-own-app.html" class="external-link">Bring your own OAuth app or API key</a></li>
</ul>
<p>Creating your own app has many benefits; most importantly:</p>
<ul>
<li>you’re in control (well, Google is ultimately always in control, but at least it’s just you and them)</li>
<li>you don’t risk hitting the rate limiting because some other user is busy with the same app</li>
</ul>
<p>Ultimately, <code>rbackupr</code> relies on <code>gargle</code> for the authentication, so you can still follow the relevant documentation to set some settings.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># See ?gargle_oauth_cache()</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span></span>
<span>  gargle_oauth_email <span class="op">=</span> <span class="st">"jane@example.com"</span>,</span>
<span>  gargle_oauth_cache <span class="op">=</span> <span class="st">"/path/to/folder/that/does/not/sync/to/cloud"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="database-cache-structure">Database cache structure<a class="anchor" aria-label="anchor" href="#database-cache-structure"></a>
</h2>
<p>The local SQLite database created for caching has the following structure:</p>
<ul>
<li>a table with details about the “base_folder” (“rbackupr_base_folder”). This may well have a single row in many common use cases.</li>
<li>a table with details about the project folders (“rbackupr_projects”). This will have one row per project created.</li>
<li>one table for folders and one for files under each project. They will be called “rbackupr_folders_ProjectName” and “rbackupr_files_ProjectName”, where “ProjectName” is the name of the project, typically set with <code><a href="reference/rb_set_project.html">rb_set_project()</a></code>.</li>
</ul>
</div>
<div class="section level2">
<h2 id="things-to-keep-in-mind">Things to keep in mind<a class="anchor" aria-label="anchor" href="#things-to-keep-in-mind"></a>
</h2>
<p>Once authenticated, you can still use <code>googledrive</code>. Keep in mind that some things may not work as expected, due to the restricted access to Google Drive given by this app.</p>
<p>For example, listing all files with <code><a href="https://googledrive.tidyverse.org/reference/drive_ls.html" class="external-link">googledrive::drive_ls()</a></code> will only list files created with this app.</p>
</div>
<div class="section level2">
<h2 id="dockerfile">Dockerfile<a class="anchor" aria-label="anchor" href="#dockerfile"></a>
</h2>
<p>This repository includes a Dockerfile. It has been created with <code>dockerfiler::dock_from_desc()</code>.</p>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p>Released under the MIT license.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing rbackupr</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Giorgio Comai <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-0515-9542" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Giorgio Comai.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
